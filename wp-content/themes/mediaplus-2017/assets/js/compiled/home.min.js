"use strict";function findAncestor(el,cls){for(;(el=el.parentElement)&&!el.classList.contains(cls););return el}function docOffset(el){var rect=el.getBoundingClientRect(),scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:rect.top+scrollTop,left:rect.left+scrollLeft}}function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,immediate||func.apply(context,args)},wait),callNow&&func.apply(context,args)}}function fade(el,oldOpacity,newOpacity,timeLapse){el.style.opacity=oldOpacity;var last=+new Date,tick=function(){oldOpacity<newOpacity?(el.style.opacity=+el.style.opacity+(new Date-last)/timeLapse,last=+new Date,+el.style.opacity<newOpacity&&(window.requestAnimationFrame&&requestAnimationFrame(tick)||setTimeout(tick,16))):(el.style.opacity=+el.style.opacity-(new Date-last)/timeLapse,last=+new Date,+el.style.opacity>newOpacity&&(window.requestAnimationFrame&&requestAnimationFrame(tick)||setTimeout(tick,16)))};tick()}function supportedTransform(){for(var prefixes="transform WebkitTransform msTransform".split(" "),div=document.createElement("div"),i=0;i<prefixes.length;i++)if(div&&void 0!==div.style[prefixes[i]])return!0;return!1}document.documentElement.classList.remove("no-js"),document.documentElement.classList.add("js");var afterLoadTiming=200,pageBanner=document.querySelector(".page-banner__media");pageBanner&&setTimeout(function(){pageBanner.classList.add("animated")},afterLoadTiming);var bobInRows=function(){for(var scrolledTo=window.pageYOffset+window.innerHeight,buoyantRows=document.querySelectorAll(".buoyant-parent:not(.animated)"),i=0;i<buoyantRows.length;i++){var thisParent=buoyantRows[i],thisTop=thisParent.getBoundingClientRect().top;if(thisTop<window.innerHeight||scrolledTo>=document.body.clientHeight){var theseKids=thisParent.querySelectorAll(".buoyant-kid:not(.animated)");if(theseKids.length){for(var kidsInView=[],k=0;k<theseKids.length;k++){var thisKid=theseKids[k];((thisTop=thisKid.getBoundingClientRect().top)<window.innerHeight||scrolledTo>=document.body.clientHeight)&&kidsInView.push(thisKid)}for(var n=0;n<kidsInView.length;n++)kidsInView[n].classList.add("animated")}else thisParent.classList.add("animated")}}};if(document.body.classList.contains("flow")||document.body.classList.contains("blog")||(setTimeout(function(){bobInRows()},200),window.addEventListener("scroll",bobInRows,!1),window.addEventListener("touchmove",bobInRows,!1),window.addEventListener("touchend",bobInRows,!1)),supportedTransform()){var bpHeaderSmall=800,header=document.querySelector(".header"),headerTray=document.querySelector(".header__tray"),headerTrayContent=document.querySelector(".header__tray-content"),menu=document.querySelector(".header__menu"),menuContents=document.getElementById("js-menu-contents"),headerContact=document.querySelector(".header__contact"),menuBtn=document.createElement("button"),headerOverlay=document.createElement("span");menuBtn.classList.add("menu-toggle"),menuBtn.setAttribute("id","js-menu-toggle"),menuBtn.setAttribute("aria-label","Site menu"),menuBtn.setAttribute("aria-controls","js-menu"),menuBtn.innerHTML='<svg class="menu-toggle__open" role="none presentation" viewBox="0 0 33 33"><circle class="st0" fill="#E9E9E9" cx="16.5" cy="16.5" r="16"/><path class="st1" fill="#909090" d="M7 21.6h12.1v1.5H7zM7 17.7h19.1v1.5H7zM7 13.8h15.8v1.5H7zM7 9.9h19.1v1.5H7z"/></svg><svg class="menu-toggle__close" viewBox="0 0 33 33"><circle class="st0" fill="#E9E9E9" cx="16.5" cy="16.5" r="16"/><path class="st1" fill="#949494" d="M9.217 22.652L22.722 9.146l1.06 1.06-13.505 13.506z"/><path class="st1" fill="#949494" d="M9.217 10.348l1.06-1.06 13.506 13.505-1.06 1.06z"/></svg>',headerOverlay.classList.add("page-overlay"),headerOverlay.classList.add("page-overlay--header"),headerOverlay.setAttribute("role","none"),menu.setAttribute("aria-labelledby","js-menu-toggle"),window.outerWidth>bpHeaderSmall&&!document.body.classList.contains("flow")?(menuBtn.setAttribute("aria-expanded","true"),menu.removeAttribute("aria-hidden"),header.classList.add("menu-active")):menuBtn.setAttribute("aria-expanded","false"),headerTray.insertBefore(menuBtn,headerTrayContent),headerTray.insertBefore(headerOverlay,headerTrayContent);var hideMenu=function(){for(var menuItems=menu.querySelectorAll("li.visible"),i=0;i<menuItems.length;i++)menuItems[i].classList.remove("visible");window.outerWidth<=bpHeaderSmall||document.body.classList.contains("flow")?(header.classList.remove("menu-active"),fade(headerOverlay,1,0,200),setTimeout(function(){headerOverlay.style.display="none",headerOverlay.style.height="0"},200),menu.setAttribute("aria-hidden","true"),menuBtn.setAttribute("aria-expanded","false"),headerContact.setAttribute("aria-hidden","true")):sendToFlow()},sendToFlow=function(e){e&&e.preventDefault();var recentPage=localStorage.getItem("recentPage");if("home"!==recentPage&&recentPage){var recentUrl=localStorage.getItem("recentUrl");window.location.href=recentUrl}else window.location.href="/"},showMenu=function(){header.classList.add("menu-active"),headerOverlay.style.display="block",fade(headerOverlay,0,1,200),menu.removeAttribute("aria-hidden"),menuBtn.setAttribute("aria-expanded","true");var menuItems=menu.querySelectorAll("li");setTimeout(function(){for(var i=0;i<menuItems.length;i++){var thisItem=menuItems[i];showMenuItem(thisItem,400*i)}},600);var afterAll=400*(menuItems.length+1);window.outerWidth<=bpHeaderSmall&&(headerOverlay.style.height="100%",setTimeout(function(){headerContact.removeAttribute("aria-hidden"),fade(headerContact,0,1,400)},afterAll)),menu.children[0].children[0].children[0].focus()},showMenuItem=function(thisItem,thisTiming){setTimeout(function(){thisItem.classList.add("visible")},thisTiming)};menuBtn.addEventListener("click",function(){menu.classList.contains("anim-init")||menu.classList.add("anim-init"),header.classList.contains("menu-active")?hideMenu():showMenu()},!1),window.addEventListener("click",function(e){e.target==headerOverlay&&hideMenu()},!1);var resizeMenu=debounce(function(){if(window.outerWidth>bpHeaderSmall)headerContact.setAttribute("aria-hidden","true"),document.body.classList.contains("flow")||showMenu();else if(header.classList.contains("menu-active")){headerContact.removeAttribute("aria-hidden");for(var menuItems=menu.querySelectorAll("li"),i=0;i<menuItems.length;i++)menuItems[i].classList.add("visible");headerContact.removeAttribute("aria-hidden"),fade(headerContact,0,1,400)}},100);window.addEventListener("resize",resizeMenu)}var logoBtn=document.getElementById("logo-btn");logoBtn.addEventListener("mouseenter",function(){logoBtn.classList.add("pulse")},!1),logoBtn.addEventListener("mouseleave",function(){logoBtn.classList.add("pause-pulse");var teaser=logoBtn.querySelector(".teaser"),teaserWidth=teaser.offsetWidth;teaser.style.width=teaserWidth+"px",logoBtn.classList.remove("pause-pulse"),logoBtn.classList.remove("pulse"),setTimeout(function(){teaser.style.removeProperty("width")},100)},!1),document.body.classList.contains("flow")||logoBtn.addEventListener("click",sendToFlow,!1),function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=b()}):"object"==typeof module&&module.exports?module.exports=b():a.svg4everybody=b()}(this,function(){function a(a,b,c){if(c){var d=document.createDocumentFragment(),e=!b.hasAttribute("viewBox")&&c.getAttribute("viewBox");e&&b.setAttribute("viewBox",e);for(var f=c.cloneNode(!0);f.childNodes.length;)d.appendChild(f.firstChild);a.appendChild(d)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.parent,d.svg,e)})}},b.onreadystatechange()}function d(a){for(var b=a;"svg"!==b.nodeName.toLowerCase()&&(b=b.parentNode););return b}return function(c){function e(){for(var c=0;c<o.length;){var h=o[c],i=h.parentNode,j=d(i);if(j){var k=h.getAttribute("xlink:href")||h.getAttribute("href");if(!k&&g.attributeName&&(k=h.getAttribute(g.attributeName)),f)if(!g.validate||g.validate(k,j,h)){i.removeChild(h);var l=k.split("#"),q=l.shift(),r=l.join("#");if(q.length){var s=m[q];s||((s=m[q]=new XMLHttpRequest).open("GET",q),s.send(),s._embeds=[]),s._embeds.push({parent:i,svg:j,id:r}),b(s)}else a(i,j,document.getElementById(r))}else++c,++p}else++c}(!o.length||o.length-p>0)&&n(e,67)}var f,g=Object(c),h=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,i=/\bAppleWebKit\/(\d+)\b/,j=/\bEdge\/12\.(\d+)\b/,k=/\bEdge\/.(\d+)\b/,l=window.top!==window.self;f="polyfill"in g?g.polyfill:h.test(navigator.userAgent)||(navigator.userAgent.match(j)||[])[1]<10547||(navigator.userAgent.match(i)||[])[1]<537||k.test(navigator.userAgent)&&l;var m={},n=window.requestAnimationFrame||setTimeout,o=document.getElementsByTagName("use"),p=0;f&&e()}}),svg4everybody(),function(w,d,undefined){function polyfill(){function scrollElement(x,y){this.scrollLeft=x,this.scrollTop=y}function ease(k){return.5*(1-Math.cos(Math.PI*k))}function shouldBailOut(x){if("object"!=typeof x||null===x||x.behavior===undefined||"auto"===x.behavior||"instant"===x.behavior)return!0;if("object"==typeof x&&"smooth"===x.behavior)return!1;throw new TypeError("behavior not valid")}function findScrollableParent(el){var isBody,hasScrollableSpace,hasVisibleOverflow;do{isBody=(el=el.parentNode)===d.body,hasScrollableSpace=el.clientHeight<el.scrollHeight||el.clientWidth<el.scrollWidth,hasVisibleOverflow="visible"===w.getComputedStyle(el,null).overflow}while(!isBody&&(!hasScrollableSpace||hasVisibleOverflow));return isBody=hasScrollableSpace=hasVisibleOverflow=null,el}function step(context){var value,currentX,currentY,elapsed=(now()-context.startTime)/SCROLL_TIME;value=ease(elapsed=elapsed>1?1:elapsed),currentX=context.startX+(context.x-context.startX)*value,currentY=context.startY+(context.y-context.startY)*value,context.method.call(context.scrollable,currentX,currentY),currentX===context.x&&currentY===context.y||w.requestAnimationFrame(step.bind(w,context))}function smoothScroll(el,x,y){var scrollable,startX,startY,method,startTime=now();el===d.body?(scrollable=w,startX=w.scrollX||w.pageXOffset,startY=w.scrollY||w.pageYOffset,method=original.scroll):(scrollable=el,startX=el.scrollLeft,startY=el.scrollTop,method=scrollElement),step({scrollable:scrollable,method:method,startTime:startTime,startX:startX,startY:startY,x:x,y:y})}if(!("scrollBehavior"in d.documentElement.style)){var Element=w.HTMLElement||w.Element,SCROLL_TIME=468,original={scroll:w.scroll||w.scrollTo,scrollBy:w.scrollBy,elScroll:Element.prototype.scroll||scrollElement,scrollIntoView:Element.prototype.scrollIntoView},now=w.performance&&w.performance.now?w.performance.now.bind(w.performance):Date.now;w.scroll=w.scrollTo=function(){shouldBailOut(arguments[0])?original.scroll.call(w,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):smoothScroll.call(w,d.body,~~arguments[0].left,~~arguments[0].top)},w.scrollBy=function(){shouldBailOut(arguments[0])?original.scrollBy.call(w,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):smoothScroll.call(w,d.body,~~arguments[0].left+(w.scrollX||w.pageXOffset),~~arguments[0].top+(w.scrollY||w.pageYOffset))},Element.prototype.scroll=Element.prototype.scrollTo=function(){if(shouldBailOut(arguments[0]))original.elScroll.call(this,arguments[0].left||arguments[0],arguments[0].top||arguments[1]);else{var left=arguments[0].left,top=arguments[0].top;smoothScroll.call(this,this,"number"==typeof left?left:this.scrollLeft,"number"==typeof top?top:this.scrollTop)}},Element.prototype.scrollBy=function(){var arg0=arguments[0];"object"==typeof arg0?this.scroll({left:arg0.left+this.scrollLeft,top:arg0.top+this.scrollTop,behavior:arg0.behavior}):this.scroll(this.scrollLeft+arg0,this.scrollTop+arguments[1])},Element.prototype.scrollIntoView=function(){if(shouldBailOut(arguments[0]))original.scrollIntoView.call(this,arguments[0]||!0);else{var scrollableParent=findScrollableParent(this),parentRects=scrollableParent.getBoundingClientRect(),clientRects=this.getBoundingClientRect();scrollableParent!==d.body?(smoothScroll.call(this,scrollableParent,scrollableParent.scrollLeft+clientRects.left-parentRects.left,scrollableParent.scrollTop+clientRects.top-parentRects.top),w.scrollBy({left:parentRects.left,top:parentRects.top,behavior:"smooth"})):w.scrollBy({left:clientRects.left,top:clientRects.top,behavior:"smooth"})}}}}"object"==typeof exports?module.exports={polyfill:polyfill}:polyfill()}(window,document);var recent=document.querySelector(".case-study--current"),setRecentCS=function(recent){var recentID=recent.getAttribute("id").replace("cs-",""),recentUrl=recent.getAttribute("data-fullurl"),currentLink=document.querySelector(".case-study-list .current"),sidebarLink=document.getElementById("link-"+recentID);null!==currentLink&&currentLink===sidebarLink||(history.replaceState({},"foo",recentUrl),localStorage.setItem("recentPage",recentID),localStorage.setItem("recentUrl",recentUrl),currentLink&&currentLink.classList.remove("current"),sidebarLink.classList.add("current"))};document.body.classList.contains("single-case-study")&&recent&&(setRecentCS(recent),document.querySelector(".case-study--new").classList.remove("case-study--new"));var lastScroll=0,loaderValue=document.getElementById("loader-value"),fetchTheCS=function(nextID,nextLink,currentCS,loaderValue,successFunction){$.ajax({url:loadNextCaseStudy.ajaxurl,type:"post",data:{action:"next_case_study",query_vars:loadNextCaseStudy.query_vars,p:nextID},beforeSend:function(){currentCS.classList.remove("case-study--current"),parseInt(loaderValue.style.width)<90&&(loaderValue.style.width="90%")},success:function(newPosts){loaderValue.style.width="100%",loaderValue.style.display="none",loaderValue.style.width="0",loaderValue.style.display="block",$("#flow").append(newPosts),setUpGalleries(),showNextLink(nextLink),successFunction&&successFunction==fadeReplaceCS&&fadeReplaceCS(currentCS)}})},resetCaseStudy=function(){for(var caseStudies=document.querySelectorAll(".case-study"),i=0;i<caseStudies.length;i++){var thisTop=caseStudies[i].getBoundingClientRect().top,thisHeight=caseStudies[i].offsetHeight;if(window.pageYOffset<lastScroll){if(thisTop+thisHeight-window.innerHeight/3>=0){setRecentCS(caseStudies[i]);break}}else if(thisTop>window.innerHeight/4){setRecentCS(caseStudies[i]);break}}},hideNextLink=function(){var visibleLink=document.querySelector(".next-case-study.visible");null!==visibleLink&&(visibleLink.classList.remove("visible"),visibleLink.removeEventListener("click",clickToLoadCS,!1))},showNextLink=function(nextLink){if(!nextLink.classList.contains("visible")){var nextID=nextLink.getAttribute("data-postid");nextLink.classList.add("visible"),nextID&&nextLink.addEventListener("click",clickToLoadCS,!1)}},animateLoader=function(scrolledTo,loaderValue){var currentCS=document.querySelector(".case-study--current");if(currentCS&&!currentCS.classList.contains("case-study--new")){var currentID=currentCS.getAttribute("id").replace("cs-",""),nextLink=document.getElementById("after-"+currentID),spaceBelow=(currentCS.getBoundingClientRect().top,currentCS.offsetHeight,1.5*(document.body.clientHeight-scrolledTo)/window.innerHeight);nextLink&&spaceBelow>0&&spaceBelow<=1?loaderValue.style.width=100*(1-spaceBelow)+"%":window.pageYOffset<lastScroll&&spaceBelow>1&&(loaderValue.style.width=0)}},scrollToFadeIn=function(){var newCS=document.querySelector(".case-study--new");newCS&&newCS.getBoundingClientRect().top<=.75*window.innerHeight&&(newCS.classList.remove("case-study--new"),hideNextLink(),resetCaseStudy())},scrollThruCS=debounce(function(scrolledTo,loaderValue){var currentCS=document.querySelector(".case-study--current");if(resetCaseStudy(),window.pageYOffset<lastScroll)hideNextLink();else{var newCS=document.querySelector(".case-study--new");document.querySelectorAll(".case-study").length;if(newCS&&newCS.getBoundingClientRect().top>window.innerHeight-100&&(nextLink=newCS.previousElementSibling)&&showNextLink(nextLink),scrolledTo>=document.body.clientHeight-50&&!newCS&&currentCS){var currentID=currentCS.getAttribute("id").replace("cs-",""),nextLink=document.getElementById("after-"+currentID),nextID=nextLink.getAttribute("data-postid");nextID?fetchTheCS(nextID,nextLink,currentCS,loaderValue):showNextLink(nextLink)}lastScroll=window.pageYOffset}},200),scrollEvents=function(){var scrolledTo=window.pageYOffset+window.innerHeight;animateLoader(scrolledTo,loaderValue),scrollToFadeIn(),scrollThruCS(scrolledTo,loaderValue)},attachScrollEvents=function(){window.addEventListener("scroll",scrollEvents,!1),window.addEventListener("touchend",scrollEvents,!1)},detachScrollEvents=function(){window.removeEventListener("scroll",scrollEvents,!1),window.removeEventListener("touchend",scrollEvents,!1)};document.body.classList.contains("single-case-study")&&attachScrollEvents();for(var scrollToCS=function(){var nextLink=document.querySelector(".next-case-study.visible"),newCS=document.querySelector(".case-study--new");docOffset(newCS).top;detachScrollEvents(),setTimeout(function(){newCS.classList.remove("case-study--new"),newCS.scrollIntoView({behavior:"smooth"}),nextLink.removeEventListener("click",clickToLoadCS,!1),setTimeout(function(){newCS.style.opacity=1,attachScrollEvents()},400)},600)},clickToLoadCS=function(e){e.preventDefault(),scrollToCS(),hideNextLink(),resetCaseStudy()},navigateNewCS=function(e){e.preventDefault(),detachScrollEvents();var link=e.currentTarget,nextID=link.getAttribute("id").replace("link-",""),currentCS=document.querySelector(".case-study--current"),previouslyLoadedCS=flow.querySelector(".case-study--new");if(previouslyLoadedCS){var previouslyLoadedID=currentCS.getAttribute("id").replace("cs-",""),nextLink=document.getElementById("after-"+previouslyLoadedID);previouslyLoadedCS.parentNode.removeChild(previouslyLoadedCS),nextLink.parentNode.removeChild(nextLink)}fetchTheCS(nextID,link,currentCS,loaderValue,fadeReplaceCS),attachScrollEvents()},fadeReplaceCS=function(currentCS){var flow=document.getElementById("flow"),caseStudies=flow.querySelectorAll(".case-study:not(.case-study--new)"),newCS=document.querySelector(".case-study--new");docOffset(newCS).top;fade(flow,1,0,400),setTimeout(function(){window.scrollTo(0,0);for(var i=0;i<caseStudies.length;i++){var thisCS=caseStudies[i],thisID=thisCS.getAttribute("id").replace("cs-",""),nextLink=document.getElementById("after-"+thisID);nextLink&&thisCS.parentNode.removeChild(nextLink),thisCS.parentNode.removeChild(thisCS)}fade(flow,0,1,100),newCS.classList.remove("case-study--new"),newCS.style.opacity=1,setRecentCS(newCS),lastScroll=0},400)},sidebarNavLinks=document.querySelectorAll(".case-study-list a"),i=0;i<sidebarNavLinks.length;i++)sidebarNavLinks[i].addEventListener("click",navigateNewCS,!1);var sidebar=document.getElementById("sidebar-nav");if(sidebar){var bpSidebarM=901,bpSidebarL=1101,logoTextWrap=logoBtn.querySelector(".logo__text-wrap"),sidebarContent=(sidebar=document.getElementById("sidebar-nav")).querySelector(".site-sidebar__content"),openSidebar=function(){sidebar.classList.remove("closed"),logoTextWrap.classList.add("abbreviated"),setTimeout(function(){sidebar.removeAttribute("aria-hidden"),setTimeout(function(){sidebarContent.classList.add("active")},600)},200)},closeSidebar=function(){sidebarContent.classList.remove("active"),setTimeout(function(){sidebar.setAttribute("aria-hidden","true")},100),setTimeout(function(){sidebar.classList.add("closed")},800)},resizeSidebar=debounce(function(){window.outerWidth>=bpSidebarL?openSidebar():closeSidebar()},400);document.body.classList.contains("home")||(resizeSidebar(),window.addEventListener("resize",resizeSidebar))}var advanceSlide=function(e){var gallery=findAncestor(e.currentTarget,"gallery"),currentSlide=gallery.querySelector(".current"),labelIndex=gallery.querySelector(".gallery__index");if(e.currentTarget.classList.contains("gallery__next"))if(currentSlide.nextElementSibling)newSlide=currentSlide.nextElementSibling;else newSlide=gallery.querySelector(".slide:first-child");else if(currentSlide.previousElementSibling)newSlide=currentSlide.previousElementSibling;else var newSlide=gallery.querySelector(".slide:last-child");currentSlide.classList.remove("current"),currentSlide.setAttribute("aria-hidden","true"),newSlide.classList.add("current"),newSlide.removeAttribute("aria-hidden"),labelIndex.innerText=newSlide.getAttribute("data-slideIndex")},setUpGalleries=function(){for(var galleries=document.querySelectorAll(".gallery"),i=0;i<galleries.length;i++){var gallery=galleries[i];if(gallery.querySelectorAll(".slide").length>1){var prev=gallery.querySelector(".gallery__prev"),next=gallery.querySelector(".gallery__next"),label=gallery.querySelector(".gallery__label");prev.removeAttribute("aria-hidden"),prev.removeAttribute("tabindex"),prev.addEventListener("click",advanceSlide,!1),next.removeAttribute("aria-hidden"),next.removeAttribute("tabindex"),next.addEventListener("click",advanceSlide,!1),label.removeAttribute("aria-hidden"),label.setAttribute("aria-live","polite"),label.setAttribute("aria-atomic","true"),gallery.classList.remove("initial")}}};setUpGalleries();for(var toggleLists=function(e){var btn=e.currentTarget,listsSection=findAncestor(btn,"row--lists"),listsWrap=listsSection.querySelector(".lists-wrapper"),lists=listsSection.querySelectorAll("ul");"true"===btn.getAttribute("aria-expanded")?(btn.innerText="View all+",btn.setAttribute("aria-expanded","false"),listsWrap.setAttribute("aria-hidden",!0),listsWrap.classList.remove("expanded"),listsWrap.removeAttribute("tabindex")):(btn.innerText="View less",btn.setAttribute("aria-expanded","true"),listsWrap.removeAttribute("aria-hidden"),listsWrap.classList.add("expanded"),listsWrap.setAttribute("tabindex","0"),listsWrap.focus());for(var i=0;i<lists.length;i++)resizeList(lists[i])},resizeList=function(list){for(var newHeight=0,listChildren=list.children,i=0;i<listChildren.length;i++)newHeight+=listChildren[i].offsetHeight;list.style.height=newHeight+"px"},listsSections=document.querySelectorAll(".row--lists"),i=0;i<listsSections.length;i++){for(var lists=listsSections[i].querySelectorAll("ul"),long=!1,button=listsSections[i].querySelector(".toggle-lists"),listsWrap=listsSections[i].querySelector(".lists-wrapper"),k=0;k<lists.length;k++)lists[k].childNodes.length>6&&(long=!0);!0===long&&(listsWrap.classList.remove("expanded"),button.style.display="block",button.removeAttribute("aria-hidden"),button.addEventListener("click",toggleLists,!1));for(var k=0;k<lists.length;k++)resizeList(lists[k])}window.addEventListener("resize",function(){for(var lists=document.querySelectorAll(".row--lists ul"),i=0;i<lists.length;i++)resizeList(lists[i])}),localStorage.setItem("recentPage","home");var homeIntro=document.querySelector(".home-intro"),text=document.getElementById("homeText"),textLines=text.querySelectorAll(".home-intro__line"),overlays=text.querySelectorAll(".overlay"),homeScrollLink=document.getElementById("scroll-home"),revealTextLine=function(overlay,timing){setTimeout(function(){overlay.classList.add("hidden")},timing)},revealText=function(){for(var revealInterval=1600,i=0;i<textLines.length;i++){if(1!==textLines[i].getClientRects().length){!1;break}!0,!0&&(revealInterval=2400,text.classList.remove("fade"),text.classList.add("slide"))}for(i=0;i<overlays.length;i++){var thisOverlay=overlays[i];revealTextLine(thisOverlay,i*revealInterval)}setTimeout(function(){fade(homeScrollLink,0,1,400),loadFirstCaseStudy(),setTimeout(function(){homeScrollLink.classList.add("pulse")},400),window.addEventListener("mousewheel",scrollAwayIntro,!1),window.addEventListener("DOMMouseScroll",scrollAwayIntro,!1),window.addEventListener("touchmove",scrollAwayIntro,!1)},(overlays.length-.5)*revealInterval)};revealText();var loadFirstCaseStudy=function(){$.ajax({url:firstCaseStudy.ajaxurl,type:"post",data:{action:"first_case_study",query_vars:firstCaseStudy.query_vars},success:function(newPosts){setTimeout(function(){$("#flow").prepend(newPosts),setUpGalleries()},200)}})},delta=0,setUpFirstCS=function(){var currentCS=document.querySelector(".case-study--current");setRecentCS(currentCS),window.outerWidth>=bpSidebarL?openSidebar():logoTextWrap.classList.add("abbreviated"),setTimeout(function(){document.body.classList.add("intro-scrolled"),currentCS.classList.remove("case-study--new"),window.removeEventListener("mousewheel",scrollAwayIntro,!1),window.removeEventListener("DOMMouseScroll",scrollAwayIntro,!1),window.removeEventListener("touchmove",scrollAwayIntro,!1),window.addEventListener("mousewheel",scrollEvents,!1),window.addEventListener("DOMMouseScroll",scrollEvents,!1),window.removeEventListener("touchmove",scrollEvents,!1),attachScrollEvents(),window.addEventListener("resize",resizeSidebar),homeIntro.parentNode&&homeIntro.parentNode.removeChild(homeIntro)},200)},scrollAwayIntro=function(e){delta++;var scrollAmount=5*Math.abs(delta);homeIntro.style.top="-"+scrollAmount+"%",scrollAmount>=100&&setUpFirstCS()},clickAwayIntro=function(e){e.preventDefault(),document.body.classList.add("intro-clicked-past"),setTimeout(function(){setUpFirstCS()},400)};homeScrollLink.addEventListener("click",clickAwayIntro,!1);
//# sourceMappingURL=home.min.js.map